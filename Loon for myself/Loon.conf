[General]
# Troyæ”¹è‡ªå¤šä½å¤§ä½¬å¹¶æ ¹æ®ä¸ªäººçˆ±å¥½è¿›è¡Œçš„DIY @Tartarus @HoCoo @one_code
# æ–°äººé¦–æ¬¡åˆ¶ä½œå¤šå¤šæŒ‡æ•™
# ä½œè€…GitHubåœ°å€ğŸŒŸhttps://github.com/Trovoy/Troy
# éœ€è¦å…¶å®ƒè„šæœ¬è‡ªè¡Œå¯»æ‰¾åœ¨è¿™æš‚ä¸æä¾›
# å¯¼å…¥é…ç½®å,æ·»åŠ æœºåœºè®¢é˜…é“¾æ¥,ä¹‹åæ›´æ–°è®¢é˜…è§„åˆ™ã€‚
# ç‚¹å‡»é…ç½®-è¯ä¹¦ç®¡ç†-ç”Ÿæˆæ–°çš„CAè¯ä¹¦ï¼Œä¹‹åè¿›å…¥ã€Œè®¾ç½®ã€>ã€Œé€šç”¨ã€>ã€Œæè¿°æ–‡ä»¶ã€, å®‰è£…Loonçš„è¯ä¹¦, å¹¶åœ¨ã€Œè®¾ç½®ã€>ã€Œé€šç”¨ã€>ã€Œå…³äºæœ¬æœºã€>ã€Œè¯ä¹¦ä¿¡ä»»è®¾ç½®ã€å¼€å¯å¯¹Loonè¯ä¹¦çš„ä¿¡ä»»ã€‚
# å¼€å¯å¹¶æ›´æ–°è„šæœ¬å’Œæ’ä»¶ã€‚
# åŸºç¡€æ•™å­¦è§†é¢‘â­ï¸https://youtu.be/_MJG4xfWEas
# åŸºç¡€æ–‡å­—æ•™ç¨‹é“¾æ¥ï¼šhttps://github.com/TiyNa/LoonManual
# Loonè§„åˆ™GitHubï¼ˆblackmatrix7ï¼‰ï¼šhttps://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Loon
# å®˜æ–¹äº¤æµç¾¤ç»„â­ï¸https://t.me/Loon0x00
# å®˜æ–¹é€šçŸ¥é¢‘é“â­ï¸https://t.me/LoonNews
# æ›´æ–°æ—¥æœŸï¼š2022.08.17
# ç‰ˆæœ¬ï¼š1.2.5

# IPv6 æ”¯æŒ
ipv6 = false

# > è·³è¿‡æŸä¸ªåŸŸåæˆ–è€…IPæ®µ
skip-proxy = 127.0.0.1,192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,100.64.0.0/10,localhost,*.local,passenger.t3go.cn,passenger.t3go.cn
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32

# DNS æœåŠ¡å™¨
dns-server = system,119.29.29.29,114.114.114.114,223.5.5.5

# Wi-Fi è®¿é—®
# > å…è®¸ Wi-Fi ç½‘ç»œä¸‹å…¶å®ƒè®¾å¤‡è®¿é—®
allow-udp-proxy = false
allow-wifi-access = false
wifi-access-http-port = 7222
wifi-access-socks5-port = 7221

# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://www.gstatic.com/generate_204

# > æµ‹é€Ÿè¶…æ—¶ (s)
test-timeout = 5

# ç½‘ç»œæ¥å£æ¨¡å¼
interface-mode = auto

# > è§£å†³ä¸€äº›ipè¯·æ±‚æ— æ³•åŒ¹é…åŸŸåç±»è§„åˆ™çš„é—®é¢˜ã€‚real-ipæŒ‡å®šçš„åŸŸåå°†ä¸è¿”å›fake ipå“åº”ï¼Œç›´æ¥å°†dnsè¯·æ±‚å‘å¾€ç›®æ ‡dnsæœåŠ¡å™¨
real-ip = msftconnecttest.com, msftncsi.com, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.battlenet.com.cn, *.battlenet.com, *.blzstatic.cn, *.battle.net

# è§£æå™¨
resource-parser = https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/backend/dist/sub-store-parser.loon.min.js

# ssid-triggerå‚æ•°ï¼Œç”¨äºæŒ‡å®šSSIDä¸‹æµé‡æ¨¡å¼åˆ‡æ¢ï¼Œï¼ˆdefaultè¡¨ç¤ºé»˜è®¤ï¼Œcellularè¡¨ç¤ºèœ‚çªï¼Œç›®å‰æ”¯æŒä¸‰ç§å€¼ï¼šruleï¼Œdirectï¼Œproxyï¼‰ 
# ssid-trigger="default":rule,"cellular":rule,"ASUS":direct,"TPLINK":proxy 

[Host]

# èŠ‚ç‚¹è®¢é˜…
[Remote Proxy]
æœºåœºè®¢é˜… = https://suo.yt/W7BkpTS

# ç­–ç•¥ç»„
[Proxy Group]
Proxy = select,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,ç¾å›½,æ–°åŠ å¡,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Airport.png
Global Media = select,Hong Kong,Taiwan,United States,Japan,Singapore,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/Streaming.png
AsianMedia = select,DIRECT,Hong Kong,Taiwan,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/StreamingCN.png
Hong Kong = select,é¦™æ¸¯,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
Taiwan = select,å°æ¹¾,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
United States = select,ç¾å›½,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
Japan = select,æ—¥æœ¬,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
Singapore = select,æ–°åŠ å¡,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png

# èŠ‚ç‚¹ç­›é€‰
[Remote Filter]
é¦™æ¸¯ = NameRegex, FilterKey = "(?i)(æ¸¯|HK|Hong)"
å°æ¹¾ = NameRegex, FilterKey = "(?i)(å°|TW|Tai)"
æ—¥æœ¬ = NameRegex, FilterKey = "(?i)(æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan)"
ç¾å›½ = NameRegex, FilterKey = "(?i)(ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States)"
æ–°åŠ å¡ = NameRegex, FilterKey = "(?i)(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore)"

# è®¢é˜…è§„åˆ™
[Remote Rule]
#å»å¹¿å‘Š
https://raw.githubusercontent.com/Trovoy/Troy-s-ruleset/main/Reject.conf, policy=REJECT, tag=Reject, enabled=true
https://raw.githubusercontent.com/Trovoy/Troy-s-ruleset/main/RejectDomain.conf, policy=REJECT, tag=RejectDomain, enabled=true

#è‹¹æœæœåŠ¡
https://raw.githubusercontent.com/Trovoy/Troy-s-ruleset/main/Apple.conf, policy=DIRECT, tag=Apple, enabled=true

#äºšæ´²åª’ä½“
https://raw.githubusercontent.com/Trovoy/Troy-s-ruleset/main/AsianMedia.conf, policy=AsianMedia, tag=AsianMedia, enabled=true

#å…¨çƒåª’ä½“
https://raw.githubusercontent.com/Trovoy/Troy-s-ruleset/main/GlobalMedia.conf, policy=Streaming, tag=GlobalMedia, enabled=true

#å…¨çƒæœåŠ¡
https://raw.githubusercontent.com/Trovoy/Troy-s-ruleset/main/Global.conf, policy=Proxy, tag=Global, enabled=true
https://raw.githubusercontent.com/Trovoy/Troy-s-ruleset/main/GlobalDomain.conf, policy=Proxy, tag=GlobalDomain, enabled=true

#ä¸­å›½ç›´è¿
https://raw.githubusercontent.com/Trovoy/Troy-s-ruleset/main/ChinaASN.conf, policy=DIRECT, tag=ChinaASN, enabled=true

# æœ¬åœ°è§„åˆ™
[Rule]
GEOIP,CN,DIRECT
FINAL,Proxy

# æœ¬åœ°é‡å†™
[URL Rewrite]

# è®¢é˜…é‡å†™
[Remote Rewrite]

# æœ¬åœ°è„šæœ¬
[Script]

# è¿œç¨‹è„šæœ¬
[Remote Script]

# æ’ä»¶
[Plugin]
# Loonæ’ä»¶ä»“åº“
https://raw.githubusercontent.com/Peng-YM/Loon-Gallery/master/loon-gallery.plugin, tag=Loon Gallery, enabled=true
# Loonæµåª’ä½“æ£€æµ‹å·¥å…·
https://raw.githubusercontent.com/Tartarus2014/Loon-Script/master/Plugin/MediaCheck.plugin, enabled=true
# BoxJs
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.loon.plugin, tag=BoxJs, enabled=true
# Sub-Store
https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/config/Loon.plugin, tag=Sub-Store, enabled=true
# è§£é”éƒ¨åˆ†SpotifyåŠŸèƒ½ é»˜è®¤å…³é—­ï¼Œå¦‚æœ‰éœ€è¦è‡ªè¡Œå¼€å¯
#https://raw.githubusercontent.com/app2smile/rules/master/plugin/spotify.plugin, tag=Spotify, enabled=true

[MITM]
enable = false
skip-server-cert-verify = true
